# =========================================================
# Hyprland 0.53.1 Window & Layer Rules (Clean + Caelestia Ready)
# =========================================================

# ---------------------------------------------------------
# Portal dialogs
# ---------------------------------------------------------
windowrulev2 = float, class:^(xdg-desktop-portal-gtk|xdg-desktop-portal)$
windowrulev2 = center, class:^(xdg-desktop-portal-gtk|xdg-desktop-portal)$
windowrulev2 = tag +hyde_portal_dialogs, class:^(xdg-desktop-portal-gtk|xdg-desktop-portal)$

# ---------------------------------------------------------
# Core floating applications
# ---------------------------------------------------------
windowrulev2 = float, class:^(blueman-manager|pavucontrol-qt|com\.gabm\.satty|vlc|kvantummanager|qt[56]ct|nwg-(look|displays)|org\.kde\.ark|org\.pulseaudio\.pavucontrol|nm-(applet|connection-editor)|org\.kde\.polkit-kde-authentication-agent-1|console-dropdown)$
windowrulev2 = tag +hyde_floating_apps, class:^(blueman-manager|pavucontrol-qt|com\.gabm\.satty|vlc|kvantummanager|qt[56]ct|nwg-(look|displays)|org\.kde\.ark|org\.pulseaudio\.pavucontrol|nm-(applet|connection-editor)|org\.kde\.polkit-kde-authentication-agent-1|console-dropdown)$

# ---------------------------------------------------------
# Common popups & dialogs
# ---------------------------------------------------------
windowrulev2 = float, title:^(Choose Files|Save As|Confirm to replace files|File Operation Progress|Open|Authentication Required|Add Folder to Workspace|File Upload.*|Choose wallpaper.*|Library.*|.*dialog.*)$
windowrulev2 = center, title:^(Choose Files|Save As|Confirm to replace files|File Operation Progress|Open|Authentication Required|Add Folder to Workspace|File Upload.*|Choose wallpaper.*|Library.*|.*dialog.*)$
windowrulev2 = tag +hyde_common_popups, title:^(Choose Files|Save As|Confirm to replace files|File Operation Progress|Open|Authentication Required|Add Folder to Workspace|File Upload.*|Choose wallpaper.*|Library.*|.*dialog.*)$

windowrulev2 = tag +hyde_common_popups, match:initialTitle:^(Open File|Volume Control|Save As.*)$
windowrulev2 = tag +hyde_common_popups, match:class:^([Xx]dg-desktop-portal-gtk|.*dialog.*)$

# ---------------------------------------------------------
# Picture-in-Picture windows
# ---------------------------------------------------------
windowrulev2 = float, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture).*
windowrulev2 = pin, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture).*
windowrulev2 = tag +picture-in-picture, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture).*

# ---------------------------------------------------------
# Apply behavior by tag
# ---------------------------------------------------------
windowrulev2 = float, match:tag:hyde_floating_apps
windowrulev2 = float, match:tag:hyde_common_popups
windowrulev2 = float, match:tag:hyde_portal_dialogs

# =========================================================
# Layer rules (0.53.1)
# =========================================================
layerrulev2 = blur, namespace:^(rofi|notifications|swaync-(notification-window|control-center)|waybar|logout_dialog)$
layerrulev2 = ignorealpha 0.5, namespace:^(rofi|notifications|swaync-(notification-window|control-center)|waybar|logout_dialog)$

# Caelestia shell
layerrulev2 = blur, namespace:^caelestia-.*
layerrulev2 = ignorealpha 0.5, namespace:^caelestia-.*
layerrulev2 = animation fade, namespace:^caelestia-background$
layerrulev2 = noanim, namespace:^caelestia-border-exclusion$

# Selection box
layerrulev2 = noanim, namespace:selection
